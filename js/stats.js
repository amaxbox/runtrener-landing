// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ Grafana —á–µ—Ä–µ–∑ CORS –ø—Ä–æ–∫—Å–∏
async function fetchGrafanaData() {
    try {
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ–∫—Å–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
        const fullUrl = '/stats-proxy.php';
        
        const response = await fetch(fullUrl);
        
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const data = await response.json();
        
        return {
            athletes: data.athletes || 1056
        };
        
    } catch (error) {
        // Fallback –∫ –∞–∫—Ç—É–∞–ª—å–Ω—ã–º –¥–∞–Ω–Ω—ã–º
        return {
            athletes: 1056 // –ü–æ—Å–ª–µ–¥–Ω–µ–µ –∏–∑–≤–µ—Å—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
        };
    }
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
async function updateStats() {
    const statsInfo = document.querySelector('.stats-info');
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
    if (statsInfo) {
        statsInfo.style.opacity = '0.7';
        statsInfo.textContent = `üèÉ‚Äç‚ôÇÔ∏è –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö...`;
    }
    
    const grafanaData = await fetchGrafanaData();
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π —Å –Ω–æ–≤—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º
    if (statsInfo) {
        statsInfo.style.opacity = '1';
        statsInfo.textContent = `${grafanaData.athletes} üèÉ‚Äç‚ôÇÔ∏è —É–∂–µ —Å –Ω–∞–º–∏`;
    }
    
}