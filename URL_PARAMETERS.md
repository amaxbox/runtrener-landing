# URL Parameters Feature

## Описание

Функциональность автоматической передачи параметров из URL лендинга в Telegram бот через параметр `start`.

## Как работает

Скрипт `js/url-params.js` автоматически обрабатывает все параметры из URL страницы и передает их в кнопки Telegram бота.

### Логика обработки параметров (в порядке приоритета):

1. **Если есть параметр `start=значение`** — используется только это значение:
   ```
   https://runtrener.ru/?start=promo123
   ↓
   https://t.me/runtrener_bot?start=promo123
   ```

2. **Если есть другие параметры** — объединяются в один параметр `start`:
   ```
   https://runtrener.ru/?utm_source=google&utm_campaign=winter
   ↓
   https://t.me/runtrener_bot?start=utm_source%3Dgoogle%26utm_campaign%3Dwinter
   ```

3. **Если параметров нет** — используется дефолтное значение по языку:
   ```
   https://runtrener.ru/ → https://t.me/runtrener_bot?start=landru
   https://runtrener.ru/en/ → https://t.me/runtrener_bot?start=landeng
   ```

## Примеры использования

### Маркетинговые кампании
```
https://runtrener.ru/?utm_source=facebook&utm_campaign=summer2024&utm_medium=ads
```
Результат: `start=utm_source%3Dfacebook%26utm_campaign%3Dsummer2024%26utm_medium%3Dads`

### Реферальные ссылки
```
https://runtrener.ru/?ref=influencer123&promo=discount20
```
Результат: `start=ref%3Dinfluencer123%26promo%3Ddiscount20`

### Прямой параметр start
```
https://runtrener.ru/?start=welcome_bonus
```
Результат: `start=welcome_bonus` (передается как есть)

### Без параметров
```
https://runtrener.ru/
https://runtrener.ru/en/
```
Результат: `start=landru` или `start=landeng`

## Технические детали

### Файлы
- **Скрипт**: `/js/url-params.js`
- **Подключение в русской версии**: `index.html:958`
- **Подключение в английской версии**: `index-en.html:958`

### Обработка
- Скрипт запускается немедленно при загрузке
- Обрабатывает все ссылки с `href*="t.me/runtrener_bot"`
- Добавляет задержки (100ms, 500ms) для динамически загружаемых элементов
- Проверяет дублирование — не добавляет параметр, если он уже есть

### Отладка
Скрипт работает в продакшн режиме без отладочных сообщений. Для отладки можно временно добавить console.log в нужные места.

## Поддерживаемые кнопки

Скрипт автоматически обрабатывает все кнопки на странице, ведущие на `https://t.me/runtrener_bot`:
- Главная кнопка в hero секции
- Кнопка в CTA секции

## Совместимость

- ✅ Работает во всех современных браузерах
- ✅ Поддерживает URLSearchParams API
- ✅ Корректно кодирует специальные символы
- ✅ Обрабатывает кириллические параметры

## История изменений

### v1.0 (2025-01-25)
- Первая реализация базовой функциональности
- Поддержка объединения всех параметров в start

### v1.1 (2025-01-25) 
- Добавлен приоритет для существующего параметра start
- Добавлены дефолтные значения по языку (landru/landeng)
- Улучшена обработка динамических элементов

### v1.2 (2025-01-25)
- Добавлена расширенная отладка
- Исправлены проблемы с загрузкой скрипта
- Оптимизирована обработка таймингов

### v1.3 (2025-01-25)
- Удалены все отладочные console.log для продакшн режима
- Упрощен код и улучшена производительность