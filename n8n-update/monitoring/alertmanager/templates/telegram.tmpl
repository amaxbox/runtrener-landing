{{ define "telegram.heartbeat" }}
{{- $alert := (index .Alerts 0) -}}
‚úÖ <b>n8n –≤ –ø–æ—Ä—è–¥–∫–µ</b>
{{- if $alert }}
  {{- if $alert.Annotations.workers }}
Workers: {{ $alert.Annotations.workers }}
  {{- end }}
  {{- if $alert.Annotations.load }} | Load: {{ $alert.Annotations.load }}
  {{- end }}
  {{- if $alert.Annotations.cpu }} | CPU: {{ $alert.Annotations.cpu }}
  {{- end }}
  {{- if $alert.Annotations.memory_used }} | Mem: {{ $alert.Annotations.memory_used }}
  {{- end }}
  {{- if $alert.Annotations.disk_free }} | Disk: {{ $alert.Annotations.disk_free }}
  {{- end }}
{{- end }}
{{ end }}

{{ define "telegram.detailed" }}
{{- if gt (len .Alerts.Firing) 0 }}
{{- $title := "" -}}
{{- if .CommonAnnotations.summary }}
{{- $title = .CommonAnnotations.summary -}}
{{- else if .CommonLabels.alertname }}
{{- $title = .CommonLabels.alertname -}}
{{- end }}
üö® <b>{{ $title }}</b>
{{- range .Alerts.Firing }}
{{- $severity := .Labels.severity }}
{{- if not $severity }}{{- $severity = "unknown" }}{{- end }}
{{- $desc := .Annotations.description }}
{{- if not $desc }}{{- $desc = "–ë–µ–∑ –æ–ø–∏—Å–∞–Ω–∏—è" }}{{- end }}
‚Ä¢ <b>{{ $severity }}</b>: {{ $desc }}
  –ò—Å—Ç–æ—á–Ω–∏–∫: {{ if .Labels.instance }}{{ .Labels.instance }}{{ else if .Labels.job }}{{ .Labels.job }}{{ else if .Labels.alertname }}{{ .Labels.alertname }}{{ else }}–Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω{{ end }}
{{- end }}
{{- else if gt (len .Alerts.Resolved) 0 }}
‚úÖ <b>{{ if .CommonAnnotations.summary }}{{ .CommonAnnotations.summary }}{{ else }}{{ .CommonLabels.alertname }}{{ end }}</b> –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.
{{- end }}
{{ end }}
